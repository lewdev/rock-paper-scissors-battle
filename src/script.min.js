var d=a.getContext("2d"),e=document,f=Math,h=f.random,k=["🧱","📃","✂️"],l=null,m=null,n=null;function p(){l=[],k.map(function(n){for(i=0;i<30;i++)l.push({g:n,x:h()*innerWidth,y:h()*innerHeight})}),clearInterval(m),clearTimeout(n),m=setInterval(q,20)}function r(n,t){var e=n.x-t.x;return t=n.y-t.y,f.sqrt(e*e+t*t)}function t(n){return f.atan2(u.y-n.y,u.x-n.x)}window.resize=function(){a.width=innerWidth,a.height=innerHeight},window.resize(),d.font="40px serif";var z,u,A,B,C,v={};function w(t){return 2===k.filter(function(n){return n!==t&&(!v[n]||0===v[n].length)}).length&&(str=t+" WINS",x=innerWidth/2-d.measureText(str).width/2,y=innerHeight-100,d.fillText(str,x,y),!0)}function q(){d.fillStyle="#888",d.rect(0,0,innerWidth,innerHeight),d.fill(),l.map(function(e){0<(z=l.filter(function(n){return"🧱"===e.g&&"✂️"===n.g||"📃"===e.g&&"🧱"===n.g||"✂️"===e.g&&"📃"===n.g})).length&&(z.sort(function(n,t){return r(e,n)-r(e,t)}),u=z[0],C=t(e)+(.4*h()-.2),A=3*f.cos(C),B=3*f.sin(C),e.x+=A,e.y+=B)}),l.map(function(e){e.x<0&&(e.x=0),e.x>innerWidth&&(e.x=innerWidth),e.y<0&&(e.y=0),e.y>innerHeight&&(e.y=innerHeight),0<(z=l.filter(function(n){return"🧱"===e.g&&"✂️"===n.g||"📃"===e.g&&"🧱"===n.g||"✂️"===e.g&&"📃"===n.g})).length&&(z.sort(function(n,t){return r(e,n)-r(e,t)}),u=z[0],r(e,u)<5&&(u.remove=1))}),l.map(function(n){return d.fillText(n.g,n.x-20,n.y+20)}),l=l.filter(function(n){return n.remove&&d.fillText("💥",n.x-20,n.y+20),!n.remove}),k.map(function(t){return v[t]=l.filter(function(n){return n.g===t})}),k.map(function(n,t){d.fillStyle="black",d.fillText(n+" "+(v[n]?v[n].length:0),30,70+70*t)}),1===k.filter(function(n){return w(n)}).length&&(clearInterval(m),n=setTimeout(p,6e3))}onload=e.onclick=e.ontouchend=e.onkeyup=p;